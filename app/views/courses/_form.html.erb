<script type="text/javascript">
  $( document ).ready( function(num){
    init()
    $( '#add-button' ).click( function( e ){
      e.preventDefault()
      num++
      updateNum()
      addEvent()
      toggleButtons()
    })
    $( '#subtract-button' ).click( function( e ){
      e.preventDefault()
      removeEvent()
      num--
      updateNum()
      toggleButtons()
    })
    function init(){
      num = 1
      $( '#course_course_instances' ).val(num)
      $( '#2, #3, #4, #5, #6, #7, #8, #9, #10, #11, #12' ).hide()
      $( '#subtract-button' ).hide()
    }
    function toggleButtons(){
      switch(num) {
        case 1:
          $( '#add-button' ).show()
          $( '#subtract-button' ).hide()
            break;
        case 12:
          $( '#add-button' ).hide()
          $( '#subtract-button' ).show()
            break;
        default:
          $( '#add-button' ).show()
          $( '#subtract-button' ).show()
      }
    }
    function addEvent(){ $( '#' + num.toString() ).show() }
    function removeEvent(){ $( '#' + num.toString() ).hide() }
    function updateNum(){ $( '#course_course_instances' ).val(num) }
  })
</script>

<div class="row">

  <%= form_for(course) do |f| %>
    <% if course.errors.any? %>
      <div id="error_explanation">
        <h2><%= pluralize(course.errors.count, "error") %> prohibited this meeting from being saved:</h2>

        <ul>
        <% course.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
        </ul>
      </div>
    <% end %>

    <div class="field">
      Course Name:
      <br>
      <%= f.text_field :name %>
    </div>

    <% if current_page?(controller: 'courses', action: 'new') %>
      <div class="field">
        Course Date(s):
        <br>
        <%= f.text_field :date %>
      </div>

      <div class="field">
        Course Time(s):
        <br>
        <%= f.text_field :time %>
      </div>

      <div class="field">
        Cost:
        <br>
        <%= f.text_field :cost %>
      </div>

      <div class="field">
        Registration Link:
        <br>
        <%= f.text_field :registration_link %>
      </div>

      <div class="field">
        Type of Course:<br>Mindfulness Course <%= f.radio_button :course_type, "mindfulness course", :checked => true %> &nbsp; &nbsp;
        MEP Course <%= f.radio_button :course_type, "mep course" %>
      </div>

      <div class="field">
        Show in Calendar? &nbsp;<%= f.check_box :include_in_calendar %>
      </div>
    <% end %>

    <% if current_page?(controller: 'courses', action: 'new') %>
      <div class="field">
        Course Description:
        <br>
        <%= f.text_area :course_content %>
      </div>
    <% end %>



    <!-- don't show up in the edit action - just the 'new' action -->
    <% if !current_page?(controller: 'courses', action: 'new') %>
      <div class="field" id="1">
        <%= f.label :start_time %>
        <%= f.datetime_select :start_time, ampm: true %>
      </div>
    <% else %>
      <div class="field" id="1">
        <%= f.label :start_time %>
        <%= f.datetime_select :start_time_1, ampm: true %>
      </div>
    <% end %>

    <div class="field" id="2">
      <%= f.label :start_time_2 %>
      <%= f.datetime_select :start_time_2, ampm: true %>
    </div>

    <div class="field" id="3">
      <%= f.label :start_time_3 %>
      <%= f.datetime_select :start_time_3, ampm: true %>
    </div>

    <div class="field" id="4">
      <%= f.label :start_time_4 %>
      <%= f.datetime_select :start_time_4, ampm: true %>
    </div>

    <div class="field" id="5">
      <%= f.label :start_time_5 %>
      <%= f.datetime_select :start_time_5, ampm: true %>
    </div>

    <div class="field" id="6">
      <%= f.label :start_time_6 %>
      <%= f.datetime_select :start_time_6, ampm: true %>
    </div>

    <div class="field" id="7">
      <%= f.label :start_time_7 %>
      <%= f.datetime_select :start_time_7, ampm: true %>
    </div>

    <div class="field" id="8">
      <%= f.label :start_time_8 %>
      <%= f.datetime_select :start_time_8, ampm: true %>
    </div>

    <div class="field" id="9">
      <%= f.label :start_time_9 %>
      <%= f.datetime_select :start_time_9, ampm: true %>
    </div>

    <div class="field" id="10">
      <%= f.label :start_time_10 %>
      <%= f.datetime_select :start_time_10, ampm: true %>
    </div>

    <div class="field" id="11">
      <%= f.label :start_time_11 %>
      <%= f.datetime_select :start_time_11, ampm: true %>
    </div>

    <div class="field" id="12">
      <%= f.label :start_time_12 %>
      <%= f.datetime_select :start_time_12, ampm: true %>
    </div>

    <% if current_page?(controller: 'courses', action: 'new') %>
      <button id="add-button"><h4>+</h4></button>
      <button id="subtract-button"><h4>-</h4></button>
    <% end %>

    <%= f.text_field :course_instances %>

    <div class="actions">
      <%= f.submit %>
    </div>

  <% end %>

</div>
