<script type="text/javascript">
  $( document ).ready( function(num){
    init()
    $( '#add-button' ).click( function( e ){
      e.preventDefault()
      num++
      updateNum()
      addEvent()
      toggleButtons()
    })
    $( '#subtract-button' ).click( function( e ){
      e.preventDefault()
      removeEvent()
      num--
      updateNum()
      toggleButtons()
    })
    function init(){
      num = 1
      $( '#course_course_instances' ).val(num)
      $( '#2, #3' ).hide()
      $( '#subtract-button' ).hide()
    }
    function toggleButtons(){
      switch(num) {
        case 1:
          $( '#add-button' ).show()
          $( '#subtract-button' ).hide()
            break;
        case 3:
          $( '#add-button' ).hide()
          $( '#subtract-button' ).show()
            break;
        default:
          $( '#add-button' ).show()
          $( '#subtract-button' ).show()
      }
    }
    function addEvent(){ $( '#' + num.toString() ).show() }
    function removeEvent(){ $( '#' + num.toString() ).hide() }
    function updateNum(){ $( '#course_course_instances' ).val(num) }
  })
</script>

<div class="row">

  <%= form_for(course) do |f| %>
    <% if course.errors.any? %>
      <div id="error_explanation">
        <h2><%= pluralize(course.errors.count, "error") %> prohibited this meeting from being saved:</h2>

        <ul>
        <% course.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
        </ul>
      </div>
    <% end %>

    <div class="field">
      Course Name:
      <br>
      <%= f.text_field :name %>
    </div>

    <div class="field">
      Type of Course:<br>Mindfunless Course <%= f.radio_button :course_type, "mindfulness course" %> &nbsp; &nbsp;
      MEP Course <%= f.radio_button :course_type, "mep course" %>
    </div>

    <div class="field">
      Show in Calendar? &nbsp;<%= f.check_box :include_in_calendar %>
    </div>

    <div class="field">
      Course Description:
      <br>
      <%= f.text_area :course_content %>
    </div>



    <!-- don't show up in the edit action - just the 'new' action -->
    <% if !current_page?(controller: 'courses', action: 'new') %>
      <div class="field" id="1">
        <%= f.label :start_time %>

        <%= f.datetime_select :start_time, {:ampm => true} %>
      </div>
    <% else %>
      <div class="field" id="1">
        <%= f.label :start_time %>
        <%= f.datetime_select :start_time_1 %>
      </div>
    <% end %>

    <div class="field" id="2">
      <%= f.label :start_time_2 %>
      <%= f.datetime_select :start_time_2 %>
    </div>

    <div class="field" id="3">
      <%= f.label :start_time_3 %>
      <%= f.datetime_select :start_time_3 %>
    </div>

    <% if current_page?(controller: 'courses', action: 'new') %>
      <button id="add-button"><h4>+</h4></button>
      <button id="subtract-button"><h4>-</h4></button>
    <% end %>

    <%= f.text_field :course_instances %>

    <div class="actions">
      <%= f.submit %>
    </div>

  <% end %>

</div>
